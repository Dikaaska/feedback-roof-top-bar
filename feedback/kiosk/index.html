<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Roof Top Pool Bar Guest Feedback</title>
<link rel="icon" type="image/png" href="/kiosk/icon_hic.png">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    min-height: 100vh;
}
.card{
    max-width:760px;
    margin:40px auto;
    background:#fff;
    padding:35px;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,.1);
    backdrop-filter: blur(6px);
}
.header{text-align:center;margin-bottom:25px}
.header h2{color:#0b6623;margin-bottom:5px;color:#5b2c83; /* ungu IHG */
    letter-spacing: 1px;}
.feedback-group{
    display:flex;
    gap:15px;
    margin-bottom:25px;
}
.feedback-btn{
    flex:1;
    padding:18px 10px;
    border-radius:16px;
    font-size:18px;
    font-weight:600;
    text-align:center;
    cursor:pointer;
    position: relative;
}
.feedback-btn input{display:none}
.good{background:#e6f4ea;color:#0b6623}
.average{background:#fff8e1;color:#8a6d00}
.bad{background:#fdecea;color:#a42828}
.feedback-btn input:checked + span{
    display:block;
    border:3px solid #0b6623;
    border-radius:16px;
    padding:15px 5px;
}
.feedback-btn input:checked + span{
    border: 3px solid #0b6623;
}
button{
    width:100%;
    padding:18px;
    font-size:20px;
    background:#ad02fc;
    color:#fff;
    border:none;
    border-radius:14px;
}
.footer{text-align:center;color:#666;margin-top:20px;font-size:14px}

.feedback-group {
    position: relative;
    z-index: 1;
}

.feedback-btn span {
    pointer-events: none;
    font-size: 36px;
    line-height: 1;
    align-items: center;
}

button {
    position: relative;
    z-index: 10;
    cursor: pointer;
}

.guest-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 30px;
}

.guest-info input {
    padding: 14px;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
}
.logo-header{
  text-align: center;
  margin-bottom: 15px;
}

.logo-header{
  text-align: center;
  margin-bottom: 15px;
}

.logo-header img{
  width: 140px;
  max-width: 60%;
}
.error-msg{
    color:#c62828;
    font-size:14px;
    margin-bottom:8px;
    display:none;
}
/* ERROR STATE */
.feedback-group.error {
    border: 2px solid #c62828;
    border-radius: 18px;
    padding: 6px;
    animation: shake 0.35s;
}

/* SHAKE ANIMATION */
@keyframes shake {
    0%   { transform: translateX(0); }
    20%  { transform: translateX(-6px); }
    40%  { transform: translateX(6px); }
    60%  { transform: translateX(-6px); }
    80%  { transform: translateX(6px); }
    100% { transform: translateX(0); }
}





</style>
</head>
<body>

<div class="card">
<div class="header">
    <div class="logo-header">
        <img src="logo_hic.png" alt="Holiday Inn Resort Bali Canggu">
    </div>
<h2>ROOF TOP POOL BAR</h2>
<p>We value your feedback</p>
</div>

<form id="f">

<div class="guest-info">
    <input type="text" name="guest_name" placeholder="Guest Name (optional)">
    <input type="text" name="room_number" placeholder="Room Number (optional)">
</div>

<p><strong>How's the Food & Beverage ?</strong></p>
<div class="error-msg" id="err-food"></div>
<div class="feedback-group">
<label class="feedback-btn good">
<input type="radio" name="food" value="Good" >
<span>ğŸ˜€</span>
</label>
<label class="feedback-btn average">
<input type="radio" name="food" value="Average">
<span>ğŸ˜</span>
</label>
<label class="feedback-btn bad">
<input type="radio" name="food" value="Bad">
<span>ğŸ˜</span>
</label>
</div>

<p><strong>How's your swimming experience ?</strong></p>
<div class="error-msg" id="err-pool"></div>
<div class="feedback-group">
<label class="feedback-btn good">
<input type="radio" name="pool" value="Good">
<span>ğŸ˜€</span>
</label>
<label class="feedback-btn average">
<input type="radio" name="pool" value="Average">
<span>ğŸ˜</span>
</label>
<label class="feedback-btn bad">
<input type="radio" name="pool" value="Bad">
<span>ğŸ˜</span>
</label>
</div>

<p><strong>How's the Music ?</strong></p>
<div class="error-msg" id="err-music"></div>
<div class="feedback-group">
<label class="feedback-btn good">
<input type="radio" name="music" value="Good">
<span>ğŸ˜€</span>
</label>
<label class="feedback-btn average">
<input type="radio" name="music" value="Average">
<span>ğŸ˜</span>
</label>
<label class="feedback-btn bad">
<input type="radio" name="music" value="Bad">
<span>ğŸ˜</span>
</label>
</div>

<p><strong>How's the Wi-Fi Connection ?</strong></p>
<div class="error-msg" id="err-wifi"></div>
<div class="feedback-group">
<label class="feedback-btn good">
<input type="radio" name="wifi" value="Good">
<span>ğŸ˜€</span>
</label>
<label class="feedback-btn average">
<input type="radio" name="wifi" value="Average">
<span>ğŸ˜</span>
</label>
<label class="feedback-btn bad">
<input type="radio" name="wifi" value="Bad">
<span>ğŸ˜</span>
</label>
</div>
<button type="submit" id="submitBtn">Submit Feedback</button>
</form>




<div class="footer">
Thank you for your feedback
</div>
</div>

<script>
document.getElementById("f").addEventListener("submit", function(e){
    e.preventDefault();

    const submitBtn = document.getElementById("submitBtn");

    const fields = [
        {name:"food", label:"Food & Beverage"},
        {name:"pool", label:"Swimming Experience"},
        {name:"music", label:"Music"},
        {name:"wifi", label:"Wi-Fi Connection"}
    ];

    let valid = true;
    let firstError = null;

    fields.forEach(f => {
        const err = document.getElementById(`err-${f.name}`);
        const input = document.querySelector(`input[name="${f.name}"]`);
        const group = input.closest(".feedback-group");

        err.style.display = "none";
        group.classList.remove("error");

        if (!document.querySelector(`input[name="${f.name}"]:checked`)) {
            err.innerText = `Please select ${f.label}`;
            err.style.display = "block";
            group.classList.add("error");

            if (!firstError) firstError = group;
            valid = false;
        }
    });

    // âŒ STOP DI SINI JIKA TIDAK VALID
    if (!valid) {
        firstError.scrollIntoView({ behavior: "smooth", block: "center" });
        return;
    }

    // âœ… BARU DISABLE SETELAH VALID
    submitBtn.disabled = true;

    fetch("../api/save_feedback.php", {
    method: "POST",
    body: new FormData(this)
})
.then(res => {
    if (!res.ok) throw new Error("HTTP ERROR");
    return res.text();
})
.then(text => {
    console.log("Server response:", text);
    if (text.trim() === "OK") {
        window.location.href = "thank_you.html";
    } else {
        alert(text);
    }
})
.catch(err => {
    console.error(err);
    alert("Server not responding");
});

});
</script>


<script>
document.querySelectorAll('input[type="radio"]').forEach(radio => {
    radio.addEventListener("change", function(){
        const group = this.closest(".feedback-group");
        const err = document.getElementById("err-" + this.name);

        group.classList.remove("error");
        if (err) err.style.display = "none";
    });
});
</script>

<script>
history.pushState(null, null, location.href);
window.onpopstate = function () {
    history.go(1);
};
</script>






</body>
</html>
